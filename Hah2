getgenv().AutoFarmV2 = true

for _, v in pairs(workspace.WarMap.Model:GetDescendants()) do
    if v.Name == "KickParts" then
        v:Destroy()
    end
end

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

local function Bypass()
    firetouchinterest(LocalPlayer.Character.HumanoidRootPart, workspace.Teleport1, 0)
    task.wait(0.1)
    firetouchinterest(LocalPlayer.Character.HumanoidRootPart, workspace.Teleport1, 1)
end

local function StartFarm()
    task.spawn(function()
        while task.wait() do
            if not getgenv().AutoFarmV2 then break end

            local character = LocalPlayer.Character
            local humanoid = character and character:FindFirstChild("Humanoid")

            if not character or not humanoid then continue end

            if humanoid.Health <= 0 then
                repeat
                    task.wait()
                    if not getgenv().AutoFarmV2 then return end
                until humanoid.Health > 0
            end

            if character:FindFirstChild("HumanoidRootPart") then
                local closestEnemy, shortestDistance = nil, math.huge

                for _, v in pairs(workspace.Enemys:GetChildren()) do
                    if v:IsA("Model") then
                        local hum = v:FindFirstChild("Humanoid")
                        local hrp = v:FindFirstChild("HumanoidRootPart")

                        for _, part in pairs(v:GetDescendants()) do
                            if part:IsA("BasePart") then
                                part.CanCollide = false
                            end
                        end

                        if hum and hrp and hum.Health > 0 then
                            local distance = (character.HumanoidRootPart.Position - hrp.Position).Magnitude
                            if distance < shortestDistance then
                                closestEnemy = v
                                shortestDistance = distance
                            end
                        end
                    end
                end

                if closestEnemy then
                    local enemyHRP = closestEnemy:FindFirstChild("HumanoidRootPart")
                    if enemyHRP then
                        pcall(function()
                            character.HumanoidRootPart.CFrame = enemyHRP.CFrame + Vector3.new(0, -6.2, 0)
                            local bv = Instance.new("BodyVelocity")
                            bv.MaxForce = Vector3.new(1e5, 1e5, 1e5)
                            bv.Velocity = Vector3.new(0, 0, 0)
                            bv.Parent = character.HumanoidRootPart
                            task.wait()
                            bv:Destroy()
                        end)
                    end
                else
                    pcall(function()
                        character.HumanoidRootPart.CFrame = CFrame.new(103.74857330322266, 8.06245231628418, -75.89685821533203)
                        local bv = Instance.new("BodyVelocity")
                        bv.MaxForce = Vector3.new(1e5, 1e5, 1e5)
                        bv.Velocity = Vector3.new(0, 0, 0)
                        bv.Parent = character.HumanoidRootPart
                        task.wait()
                        bv:Destroy()
                    end)
                end
            end
        end
    end)
end

LocalPlayer.CharacterAdded:Connect(function(char)
    task.wait(1)
    Bypass()
    wait(2)
    StartFarm()
end)

Bypass()
wait(2)
StartFarm()
